âŸ¨Parse, Fold, FlattenOffsets, Dedup, Init, StepâŸ© â† â€¢Import "bf.bqn"

Log â† {
	â€¢Out (16 â†‘ 14 â†‘ â€¢Fmt â€¢MonoTime@) âˆ¾ ğ•©
}

While â† {ğ•©â€¢_while_ğ•¨@}Â´

nâ†âŠ‘â€¢args
# Log "Starting BF interpreter for " âˆ¾ n
fâ†â€¢Fchars n
# Log "Starting Parsing"
astâ†Parse f
# Log "Completed Parsing"

# Log "Starting Optimizations"
ast Foldâ†©
# Log "Completed Fold"
ast FlattenOffsetsâ†©
# Log "Completed FlattenOffsets"
ast Dedupâ†©
# Log "Completed Dedup"
# Log "Completed Optimizations"

# Log "Starting Program"
# â€¢Show 10000 {StepâŸ100_000_000âŠ1 10 Initğ•©}â€¢_timed ast
# â€¢Showâˆ˜StepâŸ10 10 Init ast
sâ†Init ast
WhileâŠ@ 1â€¿{ğ•¤ â‹„ s Stepâ†© â‹„ @ }
# Log "Completed Program or ran out of steps"
